# 微信小程序部署教程（小白版）

## 第一步：打开微信开发者工具

1. 双击打开"微信开发者工具"
2. 用微信扫码登录

---

## 第二步：导入项目

1. 点击左侧的 **"+"** 或 **"导入项目"**
2. 填写信息：
   - **项目名称：** 她存钱
   - **目录：** 选择 `she-saves-money/miniprogram` 文件夹
   - **AppID：** `wx55db1bdcd338f90d`
   - **开发模式：** 小程序
   - **后端服务：** 不使用云服务（我们用云开发）
3. 点击 **"确定"**

---

## 第三步：配置云开发环境

1. 点击顶部工具栏的 **"云开发"** 按钮
2. 如果是第一次，会提示开通云开发：
   - 点击 **"开通"**
   - 环境名称：`cloud1`（随便填）
   - 点击 **"确定"**
3. 等待环境创建完成（大约1-2分钟）
4. 记下环境ID（类似 `cloud1-xxxxx`）

---

## 第四步：上传云函数

1. 在左侧文件列表中，找到 **`cloudfunctions`** 文件夹
2. 右键点击 **`cloudfunctions`** 文件夹
3. 选择 **"当前环境"** → 选择刚才创建的环境
4. 依次上传每个云函数：
   - 右键点击 **`dbOperations`** 文件夹
   - 选择 **"上传并部署：云端安装依赖"**
   - 等待上传完成（会显示绿色对勾 ✅）
   - 重复操作，上传其他云函数：
     - `dreamPoints`
     - `social`
     - `login`
     - `updateUserInfo`

**注意：** 每个云函数上传需要等待几秒到几十秒，不要着急！

---

## 第五步：创建数据库集合

1. 点击顶部工具栏的 **"云开发"** 按钮
2. 在弹出的云开发控制台中，点击左侧 **"数据库"**
3. 点击 **"添加集合"**
4. 依次创建以下集合（表）：

### 需要创建的集合（11个）：

1. **users** - 用户表
2. **dreams** - 梦想表
3. **checkins** - 打卡记录表
4. **points_log** - 梦想分流水表
5. **friendships** - 好友关系表
6. **watering_log** - 浇花记录表
7. **achievements** - 成就表
8. **leaderboard** - 排行榜表
9. **team_challenges** - 组队挑战表
10. **skins** - 皮肤表
11. **user_skins** - 用户皮肤表

**操作方法：**
- 点击 **"添加集合"**
- 输入集合名称（如 `users`）
- 点击 **"确定"**
- 重复11次，创建所有集合

---

## 第六步：配置数据库权限

1. 在云开发控制台的 **"数据库"** 页面
2. 点击每个集合名称
3. 点击 **"权限设置"**
4. 选择 **"自定义安全规则"**
5. 输入以下规则：

```json
{
  "read": "auth.openid == doc._openid",
  "write": "auth.openid == doc._openid"
}
```

6. 点击 **"保存"**
7. 对所有11个集合重复此操作

---

## 第七步：测试运行

1. 点击顶部工具栏的 **"编译"** 按钮（或按 `Ctrl + B`）
2. 小程序会在右侧模拟器中运行
3. 如果看到首页，说明成功了！🎉

---

## 常见问题

### Q1: 找不到 cloudfunctions 文件夹？
**A:** 确保导入的是 `she-saves-money/miniprogram` 目录，不是 `she-saves-money`

### Q2: 上传云函数失败？
**A:** 
- 检查网络连接
- 确保已选择云开发环境
- 重试上传

### Q3: 编译报错？
**A:** 
- 检查 AppID 是否正确
- 检查云开发环境是否已开通
- 查看控制台错误信息

### Q4: 数据库权限怎么设置？
**A:** 每个集合都要单独设置权限，确保用户只能访问自己的数据

---

## 完成检查清单 ✅

- [ ] 微信开发者工具已打开
- [ ] 项目已导入
- [ ] 云开发环境已创建
- [ ] 5个云函数已上传
- [ ] 11个数据库集合已创建
- [ ] 数据库权限已配置
- [ ] 小程序可以正常编译运行

---

**Nick，按照这个教程一步步来，有任何问题随时问我！** 💪
